<div class="auth-container">
    <!-- Left Side: Image & Purpose -->
    <div class="auth-image-side">
        <div class="auth-image-text">
            <h1>{{ 'APP.AUTH.JOIN' | translate }}</h1>
            <p>{{ 'APP.AUTH.JOIN_DESC' | translate }}</p>
        </div>
        <img src="assets/auth-image.png" [alt]="'APP.AUTH.SECURE_LIFE' | translate">
    </div>

    <!-- Right Side: Form -->
    <div class="auth-form-side">
        <div class="auth-card">
            <div class="auth-header">
                <h2>{{ 'APP.AUTH.CREATE_ACCOUNT' | translate }}</h2>
                <p>{{ 'APP.AUTH.SIGNUP_DESC' | translate }}</p>
            </div>

            <form [formGroup]="signupForm" (ngSubmit)="onSubmit()">
                <div class="form-group">
                    <label for="username">{{ 'APP.AUTH.USERNAME_LABEL' | translate }}</label>
                    <input type="text" id="username" formControlName="username"
                        [placeholder]="'APP.AUTH.USERNAME_PLACEHOLDER' | translate"
                        [class.invalid]="signupForm.get('username')?.invalid && signupForm.get('username')?.touched">
                    <div class="error-msg"
                        *ngIf="signupForm.get('username')?.invalid && signupForm.get('username')?.touched">
                        <span *ngIf="signupForm.get('username')?.errors?.['required']">{{ 'APP.AUTH.USERNAME_REQ' |
                            translate }}</span>
                        <span *ngIf="signupForm.get('username')?.errors?.['minlength']">{{ 'APP.AUTH.USERNAME_MIN' |
                            translate }}</span>
                    </div>
                </div>

                <div class="form-group">
                    <label for="email">{{ 'APP.AUTH.EMAIL_LABEL' | translate }}</label>
                    <input type="email" id="email" formControlName="email"
                        [placeholder]="'APP.AUTH.EMAIL_PLACEHOLDER' | translate"
                        [class.invalid]="signupForm.get('email')?.invalid && signupForm.get('email')?.touched">
                    <div class="error-msg" *ngIf="signupForm.get('email')?.invalid && signupForm.get('email')?.touched">
                        <span *ngIf="signupForm.get('email')?.errors?.['required']">{{ 'APP.AUTH.EMAIL_REQ' | translate
                            }}</span>
                        <span *ngIf="signupForm.get('email')?.errors?.['email']">{{ 'APP.AUTH.EMAIL_INVALID' | translate
                            }}</span>
                    </div>
                </div>

                <div class="form-group">
                    <label for="password">{{ 'APP.AUTH.PASSWORD_LABEL' | translate }}</label>
                    <div class="password-wrapper">
                        <input [type]="showPassword ? 'text' : 'password'" id="password" formControlName="password"
                            placeholder="••••••••"
                            [class.invalid]="signupForm.get('password')?.invalid && signupForm.get('password')?.touched">
                        <button type="button" class="password-toggle-btn" (click)="togglePasswordVisibility()">
                            <!-- Eye Icon (Show) -->
                            <svg *ngIf="!showPassword" xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                                viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                stroke-linecap="round" stroke-linejoin="round">
                                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                                <circle cx="12" cy="12" r="3"></circle>
                            </svg>
                            <!-- Eye Off Icon (Hide) -->
                            <svg *ngIf="showPassword" xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                                viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                stroke-linecap="round" stroke-linejoin="round">
                                <path
                                    d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24">
                                </path>
                                <line x1="1" y1="1" x2="23" y2="23"></line>
                            </svg>
                        </button>
                    </div>
                    <div class="error-msg"
                        *ngIf="signupForm.get('password')?.invalid && signupForm.get('password')?.touched">
                        <span *ngIf="signupForm.get('password')?.errors?.['required']">{{ 'APP.AUTH.PASSWORD_REQ' |
                            translate }}</span>
                        <span *ngIf="signupForm.get('password')?.errors?.['minlength']">{{ 'APP.AUTH.PASSWORD_MIN' |
                            translate }}</span>
                    </div>
                </div>

                <div class="error-banner" *ngIf="error">
                    {{ error }}
                </div>

                <button type="submit" class="btn-primary" [disabled]="signupForm.invalid || isLoading">
                    <span *ngIf="isLoading" class="spinner"></span>
                    <span *ngIf="!isLoading">{{ 'APP.AUTH.SIGNUP_BTN' | translate }}</span>
                </button>

                <div class="auth-footer">
                    {{ 'APP.AUTH.HAVE_ACCOUNT' | translate }} <a routerLink="/login">{{ 'APP.AUTH.LOGIN_LINK' |
                        translate }}</a>
                </div>
            </form>
        </div>
    </div>
</div>